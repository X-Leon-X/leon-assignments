<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Battle Royale Simulator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background: #1a1a1a;
        }
        .container {
            background: #2d2d2d;
            padding: 20px;
            border-radius: 8px;
            color: white;
            width: 90%;
            max-width: 600px;
        }
        h1 {
            text-align: center;
            color: #00ff00;
        }
        .arena {
            border: 2px solid #00ff00;
            height: 400px;
            margin: 20px 0;
            position: relative;
            background: #0a0a0a;
            overflow: hidden;
        }
        .player {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
            transition: all 0.05s linear;
        }
        .health-bar {
            position: absolute;
            width: 25px;
            height: 3px;
            background: #ff0000;
            border-radius: 2px;
            top: -8px;
            left: -2.5px;
        }
        .health-bar-fill {
            height: 100%;
            background: #00ff00;
            border-radius: 2px;
        }
        .bullet {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #ffff00;
            border-radius: 50%;
        }
        .rock {
            position: absolute;
            width: 30px;
            height: 30px;
            background: #666;
            border-radius: 4px;
        }
        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 20px 0;
        }
        .stat-box {
            background: #3d3d3d;
            padding: 10px;
            border-radius: 4px;
            border-left: 3px solid #00ff00;
        }
        .log {
            background: #0a0a0a;
            border: 1px solid #00ff00;
            padding: 10px;
            height: 150px;
            overflow-y: auto;
            font-size: 12px;
            margin: 10px 0;
        }
        .log-entry {
            margin: 4px 0;
            color: #00ff00;
        }
        button {
            background: #00ff00;
            color: black;
            border: none;
            padding: 10px 20px;
            font-weight: bold;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            font-size: 16px;
        }
        button:hover {
            background: #00cc00;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚öîÔ∏è AI Battle Royale Simulator</h1>
        <div class="arena" id="arena"></div>
        <div class="stats">
            <div class="stat-box">
                <strong>Players Alive:</strong> <span id="alive">10</span>
            </div>
            <div class="stat-box">
                <strong>Round:</strong> <span id="round">1</span>
            </div>
        </div>
        <div class="log" id="log"></div>
        <button onclick="simulator.start()">Start Battle</button>
        <button onclick="simulator.reset()">Reset</button>
    </div>

    <script>
        const simulator = {
            players: [],
            bullets: [],
            rocks: [],
            log: [],
            running: false,
            lastShotTime: {},

            init() {
                this.players = [];
                this.bullets = [];
                this.rocks = [];
                this.log = [];
                this.lastShotTime = {};
                
                for (let i = 0; i < 10; i++) {
                    this.players.push({
                        id: i,
                        x: Math.random() * 550,
                        y: Math.random() * 350,
                        vx: 0,
                        vy: 0,
                        health: 100,
                        alive: true,
                        angle: Math.random() * Math.PI * 2
                    });
                    this.lastShotTime[i] = 0;
                }
                
                // Create rocks
                for (let i = 0; i < 5; i++) {
                    this.rocks.push({
                        x: Math.random() * 520,
                        y: Math.random() * 370,
                        width: 30,
                        height: 30
                    });
                }
                
                this.render();
            },

            start() {
                if (this.running) return;
                this.running = true;
                this.addLog("Battle started!");
                this.simulate();
            },

            simulate() {
                if (!this.running || this.players.filter(p => p.alive).length <= 1) {
                    this.running = false;
                    if (this.players.filter(p => p.alive).length === 1) {
                        const winner = this.players.find(p => p.alive);
                        this.addLog(`üèÜ Player ${winner.id} WINS!`);
                    }
                    return;
                }

                const now = Date.now();

                // Player movement
                this.players.forEach(p => {
                    if (!p.alive) return;
                    
                    if (Math.random() < 0.05) {
                        p.angle = Math.random() * Math.PI * 2;
                        const speed = 2;
                        p.vx = Math.cos(p.angle) * speed;
                        p.vy = Math.sin(p.angle) * speed;
                    }
                    
                    p.x += p.vx;
                    p.y += p.vy;
                    p.x = Math.max(0, Math.min(550, p.x));
                    p.y = Math.max(0, Math.min(350, p.y));
                });

                // Update bullets with gravity
                this.bullets = this.bullets.filter(b => {
                    b.vy += 0.1; // Gravity
                    b.x += b.vx;
                    b.y += b.vy;
                    
                    // Bounce off rocks
                    for (let rock of this.rocks) {
                        if (b.x > rock.x && b.x < rock.x + rock.width &&
                            b.y > rock.y && b.y < rock.y + rock.height) {
                            b.vx *= -0.8;
                            b.vy *= -0.8;
                            b.x = Math.max(rock.x - 5, Math.min(rock.x + rock.width + 5, b.x));
                            b.y = Math.max(rock.y - 5, Math.min(rock.y + rock.height + 5, b.y));
                        }
                    }
                    
                    return b.x >= 0 && b.x <= 550 && b.y >= 0 && b.y <= 350;
                });

                // Gun combat with reload
                this.players.forEach(p1 => {
                    if (!p1.alive) return;
                    this.players.forEach(p2 => {
                        if (!p2.alive || p1.id === p2.id) return;
                        const dist = Math.hypot(p1.x - p2.x, p1.y - p2.y);
                        
                        if (dist < 200 && Math.random() < 0.2 && now - this.lastShotTime[p1.id] > 500) {
                            this.lastShotTime[p1.id] = now;
                            const angle = Math.atan2(p2.y - p1.y, p2.x - p1.x);
                            this.bullets.push({
                                x: p1.x,
                                y: p1.y,
                                vx: Math.cos(angle) * 5,
                                vy: Math.sin(angle) * 5,
                                shooterId: p1.id,
                                targetId: p2.id
                            });
                        }
                    });
                });

                // Bullet collision
                this.bullets.forEach((bullet, idx) => {
                    const target = this.players.find(p => p.id === bullet.targetId && p.alive);
                    if (target) {
                        const dist = Math.hypot(bullet.x - target.x, bullet.y - target.y);
                        if (dist < 15) {
                            target.health -= 25;
                            if (target.health <= 0) {
                                target.alive = false;
                                const shooter = this.players.find(p => p.id === bullet.shooterId);
                                this.addLog(`üí• Player ${target.id} shot by Player ${shooter.id}`);
                            }
                            this.bullets.splice(idx, 1);
                        }
                    }
                });

                this.render();
                requestAnimationFrame(() => this.simulate());
            },

            render() {
                const arena = document.getElementById('arena');
                
                // Render rocks
                this.rocks.forEach((rock, idx) => {
                    let rockEl = document.getElementById(`rock-${idx}`);
                    if (!rockEl) {
                        rockEl = document.createElement('div');
                        rockEl.id = `rock-${idx}`;
                        rockEl.className = 'rock';
                        arena.appendChild(rockEl);
                    }
                    rockEl.style.left = rock.x + 'px';
                    rockEl.style.top = rock.y + 'px';
                });

                // Render players with health bars
                this.players.forEach(p => {
                    let playerEl = document.getElementById(`player-${p.id}`);
                    if (!playerEl && p.alive) {
                        playerEl = document.createElement('div');
                        playerEl.id = `player-${p.id}`;
                        playerEl.className = 'player';
                        playerEl.innerHTML = `<div class="health-bar"><div class="health-bar-fill"></div></div>${p.id}`;
                        arena.appendChild(playerEl);
                    }
                    if (playerEl) {
                        playerEl.style.left = p.x + 'px';
                        playerEl.style.top = p.y + 'px';
                        playerEl.style.background = `hsl(${p.id * 36}, 100%, 50%)`;
                        const healthFill = playerEl.querySelector('.health-bar-fill');
                        if (healthFill) healthFill.style.width = (p.health / 100 * 25) + 'px';
                        if (!p.alive) playerEl.remove();
                    }
                });

                // Render bullets
                this.bullets.forEach((bullet, idx) => {
                    let bulletEl = document.getElementById(`bullet-${idx}`);
                    if (!bulletEl) {
                        bulletEl = document.createElement('div');
                        bulletEl.id = `bullet-${idx}`;
                        bulletEl.className = 'bullet';
                        arena.appendChild(bulletEl);
                    }
                    bulletEl.style.left = bullet.x + 'px';
                    bulletEl.style.top = bullet.y + 'px';
                });

                document.getElementById('alive').textContent = this.players.filter(p => p.alive).length;
            },

            addLog(msg) {
                this.log.push(msg);
                const logEl = document.getElementById('log');
                const entry = document.createElement('div');
                entry.className = 'log-entry';
                entry.textContent = msg;
                logEl.appendChild(entry);
                logEl.scrollTop = logEl.scrollHeight;
            },

            reset() {
                this.running = false;
                this.init();
                document.getElementById('log').innerHTML = '';
            }
        };

        simulator.init();
    </script>
</body>
</html>
